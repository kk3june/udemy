# 201. 사용자 정의 Http 훅 빌드하기
## 컴포넌트 훅으로 구현할 기능 정의
 - App.js, NewTask.js 는 data 요청을 보내는 공통점이 존재한다.
    - 공통점
        1. 두 컴포넌트 모두 loading, error 상태관리
        2. 2가지 상태를 동일한 방법으로 처리
    - 다른점
        - App.js : GET 요청으로 body, headers 를 보내지 않음
        - NewTask.js : POST 요청으로 데이터를 추가하는 로직
        - 두 컴포넌트 모두 응답을 변환해야하는 로직이 존재하지만 차이가 존재한다.

커스텀 훅을 구현할 때 data fetching 과 같이 특정 기능만 제공하도록 구현을 하면 재사용성이 떨어진다.
어떤 요청이든 받아서, 모든 url로 보낼 수 있어야 하고, 어떤 데이터든 변환할 수 있어야 하며, 로딩과 에러 상태를 관리해야 한다. 또한 이 모든 과정은 순서대로 처리해야 재사용성이 높은 커스텀 훅스를 구현할 수 있다. 

# 202. 사용자 정의 Http 훅 사용하기
App.js 에서 transformTask 함수를 선언하고 데이터 변환 코드를 작성한다.
그리고, 이를 useHttp 커스텀 훅스로 전달하면 sendRequest 에서 데이터를 가져오면 그 내부에서 transformTaks 함수의 매개변수로 응답받은 데이터를 전달한다. 그리고 그 값을 다시 구조 분해 할당으로 App 컴포넌트에서 useHttp 커스텀 훅으로부터 전달받아 사용하게된다.
-> 주요 로직은 useHttp 커스텀 훅에 위치해 있고, 데이터에 대한 로직은 그 데이터가 필요한 컴포넌트에 위치

### infinity re-render
기존에 App 컴포넌트 내부에서 상태 갱신만 담당하던 fetchTasks 와 달리 이제 App 컴포넌트에서는 fetchTasks 내부 로직을 알 수 없기 때문에 가 바뀔때마다 재실행하기 위해 의존성을 추가해야 한다.
하지만 현 시점에서 useEffect 의존성 배열에 fetchTasks 를 추가하게 되면 infinity re-rendering 이 발생한다.
-> 따라서 생략